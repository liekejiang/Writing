# Ruby Regexp--Day 5

Regexp 是 regulization express 的简写，用于将模式与字符串匹配。Ruby中，一个模式写在正斜杠字符中间，描述一个字符串的内容。
语法格式：
```ruby
/regexp/
```

## =~ and #match operator
**~=** 和 **#match** 操作符可以实现模式匹配。 前者是基本的匹配模式，如果找到相匹配的字符串，则返回要匹配的字符串首字符在相应字符串中的下标。
```ruby
2.4.0 :002 > /love/ =~ "I love u"   => 2 
                        01234567
```

**#match** 会返回匹配数据对象，否则返回**nil**
```ruby
2.4.0 :003 > /love/.match  "I love u"                                                   => #<MatchData "love"> 
```
返回的是什么格式呢？

## 元字符和转义
元字符在模式中有具体特定含义。要匹配一个字符串，它们将被转回("\")或者转义。元字符有(,) (.) (?) (+) (-) (*) [,] {,}。否则返回匹配的字符串。
```ruby
2.4.0 :007 > /2 \* 2 \+ 3 \- 1 = \?/.match('Does 2 * 2 + 3 - 1 = ?')
 => #<MatchData "2 * 2 + 3 - 1 = ?"> 
 
2.4.0 :009 > /2 * 2 + 3 - 1 = ?/.match('Does 2 * 2 + 3 - 1 = ?')
 => nil 
```
简而言之，这些符号在正则表达式里另有他用，直接输入会产生歧义，所以为了正确地表达我们需要的意思，我们需要在前面加上“\”符号。上述代码范例给出了加与不加转义的区别。

## 字符类
有些特殊符号匹配需要转回或者转义，有些字母也需要。字符类使用方括号。
### [ab]

[ab]表示**a**或**b**，而/ab/表示**a**和**b**。
```ruby
2.4.0 :010 > /j[afdvs]av/.match('java')
 => nil 
2.4.0 :011 > /j[afdvs]va/.match('java')
 => #<MatchData "java"> 
```
上述代码可以看出，在第二次匹配时，a在这么多选项中被匹配上。
### [a-d]
这里[a-d]表示[abcd]。连字符(**-**)字符类表示字符的范围。
```ruby
2.4.0 :016 > /[a-ge-p]/.match('bf')
 => #<MatchData "b"> 
```
我们可以发现，会返回匹配到的第一个字符。
### [^a-d]
**^** 符号表示范围中不存在的其他任何字符。
```ruby
/[^a-d]/.match('abcdefghijklmnopq')
 => #<MatchData "e"> 
```
同样只会返回匹配到的第一个字符。

## 重复
本节定义的字符与单个字符匹配。在重复元字符的帮助下，可以指定需要发生的次数。 这些元字符称为量词。
* **\***：零次或多次
* **\+**：一次或多次
* **\?**: 零次或一次（可选）
* **{n}**: 正好**n**次
* **{n,}**: **n**次以上
* **{，m}**: **m**次以下
* **{n,m}**: **n**到**m**次之间

```ruby
2.4.0 :028 > "SSSITT".match(/S{3}+[[:upper:]]+[[:upper:]]+[[:upper:]]/)
 => #<MatchData "SSSITT"> 
```
这句话表达的意思是，S要出现3次，+代表连接，[[:upper:]]代表任何大写字母（猜测）。这段代码也等同：
```ruby
2.4.0 :029 > "SSSITT".match(/S{3}+[[:upper:]]{3}/)
 => #<MatchData "SSSITT"> 
```
正则表达式和匹配字符串的先后在ruby中不重要。
## 分组
分组使用括号将项目组合在一起，将这些术语分组成一个。
```ruby
irb(main):001:0> /[aeiou]\w{2}/.match('family')
=> #<MatchData "ami">
irb(main):003:0> /([aeiou]\w){2}/.match('family')
=> #<MatchData "amil" 1:"il">
```
与其说是组合，不如说是优先级。这里\w代表任何一个数字，字母，下划线，汉字。其他元字符的用法明天填坑。



